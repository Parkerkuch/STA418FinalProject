---
title: "Final Project Assignment 1"
author: "Bradley Monarch"
date: "3/13/2023"
output:
  rmdformats::material:
    code_folding: hide
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, error = TRUE, eval = TRUE,
                      message = FALSE, warning = FALSE)
```

```{r}
library(data.table)
library(tidyverse)
library(knitr)
library(arrow)
library(bench)
library(ggbeeswarm)
library(haven)
library(stringr)
library(lubridate)
library(ggpubr)
library(skimr)
```


### Import Data

```{r}
gunData <- data.table::fread("gunViolenceFull.csv")
```

### Explore and display high-level characteristics of your data set, e.g., important variables and their types, different levels for factor variables, any patterns of missing values.

```{r}
summary(gunData)
glimpse(gunData)
skim(gunData)
```

Obtain at least two tables of group-level summary statistics for quantitative variables in your data set.


```{r}
#Summary statistics for number of people killed
gunData %>% pull(n_killed) %>% summary()

```

```{r}
#Summary statistics for number of people injured
gunData %>% pull(n_injured) %>% summary()

```

Obtain at least one frequency table showing the cross-section of two categorical variables in your data set.

```{r}

gunData2 <- gunData %>% mutate(fatal = n_killed >0)
gunData2 %>% count(state, fatal)


```

```{r}
gunData3 <- gunData2 %>% mutate(year = lubridate::year(date))
```

Create one ggplot visualizations for your data, including appropriate labels with units of measurement when applicable and a specified theme.

```{r}
#Drop 2013 and 2018 as there is incomlete data for these years.
gunData4 <- gunData3 %>% dplyr::filter(year != 2013 & year != 2018)
```



```{r}
gunData4 %>% ggplot(aes(x = year,
                        y = sum(fatal))) +
  geom_col() +
  labs(title = "Number of people killed in shootings by year",
       x = "Year",
       y = "Total people killed") + 
  theme_bw() +
  scale_y_continuous(labels = scales::comma)
```

## Creating Data Dictionary
```{r}
# Creating data dictionary. 
# Note penguins will need to be replaced with your own data set, and 
# the variable descriptions should be updated as well.
dataDictionary <- tibble(Variable = colnames(gunData),
                         Description = c("gunviolencearchive.org ID for incident",
                                         "date of occurrence",
                                         "state",
                                         "city or county",
                                         "address where incident took place",
                                         "number of people killed",
                                         "number of people injured",
                                         "link to gunviolencearchive.org webpage containing details of incident",
                                         "link to online news story concerning incident",
                                         "ignore, always False",
                                         "Congressional district",
                                         "gun stolen or not, e.g. 'Unknown' or 'Stolen'",
                                         "description of gun type",
                                         "list of incident characteristics",
                                         "latitude of location",
                                         "description of location where incident took place",
                                         "longitude of location",
                                         "number of guns involved",
                                         "additional notes about the incident",
                                         "participant age",
                                         "participant description of age group, e.g. 'Adult 18+'",
                                         "participant gender being 'Male' or 'Female'",
                                         "participant name",
                                         "relationship of participant to other participants",
                                         "outcome, one of 'Arrested', 'Killed', 'Injured', or 'Unharmed'",
                                         "participant category being 'Victim' or 'Subject-Suspect'",
                                         "links to online news stories concerning incident",
                                         "state house district",
                                         "state senate district",
                                         "full address"),
                         Type = map_chr(gunData, .f = function(x){typeof(x)[1]}),
                         Class = map_chr(gunData, .f = function(x){class(x)[1]}))
```



```{r}
flextable::flextable(dataDictionary, cwidth = 2)
```














